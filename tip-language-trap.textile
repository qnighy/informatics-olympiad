---
layout: default
title: 競技プログラミングで陥りやすい言語仕様の罠
writer: qnighy
---

競技プログラミングでは手続き型言語として必要な最低限度の言語仕様さえ覚えておけば問題ないとされることが多い。

その一方で、ある種の特殊な言語仕様を知らないことによって特殊なバグに悩まされることも少なくない。

そこでここでは、そのような競技者の嵌りやすい罠を見つけ次第挙げていきたい。

h2. CとC++の配列初期化の罠

{% highlight cpp %}
int array[128] = {0};
{% endhighlight %}

これはC言語において一般的な配列の初期化である。これは簡単に言ってしまえば、arrayの中身を全て0で初期化する。

しかしこれを次のようにしてはいけない。

{% highlight cpp %}
int array[128] = {-1}; // バグの原因！
{% endhighlight %}

これは *最初の項目だけを* -1で初期化する。

詳しい理由は "本の虫: 多くのプログラマは言語を表面的な理解だけで使っている":http://cpplover.blogspot.com/2010/09/blog-post_18.html などを参照してほしい。

h2. 演算子の優先順位

特にビット演算が関係する計算式には注意すること。

{% highlight cpp %}
int dp[ 1<<MAX_N + 5 ]; // バグの原因！
{% endhighlight %}

{% highlight cpp %}
while( a^b == 1 ) {} // バグの原因！
{% endhighlight %}

boolean型が特別視されるJavaでは後者は見つけやすいが、前者は発見できない。

注意が必要である。

